package ircutils

import (
	"container/list"
	"time"
)

type MessageList struct {
	*list.List
}

type Message struct {
	text string
	time time.Time
}

func (m Message) GetString() string {
	return m.text
}

func (m Message) GetTime() time.Time {
	return m.time
}


func NewMessage(m interface{}) (Message) {
	return Message{text: m.(string), time: time.Now()}
}

func NewMessageList() MessageList {
	return MessageList{list.New()}
}

func (l *MessageList) Poll() ([]Message) {
	var ml []Message
	for e := l.Front(); e != nil; e = e.Next() {
		ml = append(ml, e.Value.(Message)) // ugly hack, I admit :(
	}
	return ml
}
